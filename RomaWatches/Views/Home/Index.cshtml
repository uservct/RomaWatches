@model List<RomaWatches.Models.Product>
@{
    ViewData["Title"] = "ROMA WATCHES - Nghệ Thuật Của Sự Chính Xác";
    Layout = null;
}
<!DOCTYPE html>
<html class="dark" lang="vi">
<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>@ViewData["Title"]</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#ecb613",
                        "background-light": "#f8f8f6",
                        "background-dark": "#221d10",
                    },
                    fontFamily: {
                        "display": ["Noto Serif", "serif"]
                    },
                    borderRadius: {
                        "DEFAULT": "0.25rem",
                        "lg": "0.5rem",
                        "xl": "0.75rem",
                        "full": "9999px"
                    },
                },
            },
        }
    </script>
    <style>
        .material-symbols-outlined {
            font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
            font-size: 20px;
        }
    </style>
</head>
<body class="font-display bg-background-light dark:bg-background-dark">
    <div class="relative flex h-auto min-h-screen w-full flex-col overflow-x-hidden">
        <div class="layout-container flex h-full grow flex-col w-full">
            <div class="w-full flex flex-1 justify-center py-5">
                <div class="layout-content-container flex flex-col w-full flex-1">
                    @await Html.PartialAsync("_Header")
                    <div class="h-[72px]"></div>
                    <main class="flex flex-col gap-12 sm:gap-16 md:gap-20 pt-5 w-full">
                        <div class="w-full">
                            <div class="w-full">
                                <div class="flex min-h-[60vh] sm:min-h-[65vh] md:min-h-[100vh] flex-col gap-6 bg-cover bg-center bg-no-repeat items-center justify-center text-center px-4 sm:px-6 md:px-8 lg:px-12 xl:px-16 pb-12 sm:pb-16 w-full" data-alt="Close up shot of a luxury chronograph watch on a dark, textured background." style='background-image: linear-gradient(rgba(0, 0, 0, 0.2) 0%, rgba(0, 0, 0, 0.6) 100%), url("https://lh3.googleusercontent.com/aida-public/AB6AXuB9BIzj4BpbkNQe3bzWcSR-km-Yy3_QDQimtD4GDhqMv2wC8-YLRca_MM8CkzvOlnXXbkda-Zn3OXcoCHnmugxCVjSlckq8550CEW0TEr8DESqFtq6Pve0lgcmnPVr6a2jbanFBgd2p9XNSQ7JbjoHz0tUzpMuOtglvW_CzGmiRkcfpLMl7-26FPhjRVIIDTO4rBIP_my9vtpaeY05-HZd16QR0IrJTUi-ZvzNWNpiCzRObVqiTZw2_2BqA7Vep2bxIOFMxVrLtUQY");'>
                                    <div class="flex flex-col items-center gap-4 sm:gap-6 text-center">
                                        <h2 class="text-white/90 text-sm sm:text-base md:text-lg font-normal leading-normal uppercase tracking-widest">
                                            Thanh Lịch Vượt Thời Gian
                                        </h2>
                                        <h1 class="text-white text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-bold leading-tight tracking-[-0.033em] uppercase">
                                            Bộ Sưu Tập Mới Nhất
                                        </h1>
                                    </div>
                                    <a href="@Url.Action("Index", "Product")" class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-md h-10 sm:h-12 md:h-14 px-6 sm:px-8 md:px-10 bg-transparent text-white hover:bg-white/10 transition-colors border border-white/80 text-sm sm:text-base md:text-lg font-bold leading-normal tracking-widest uppercase mt-2">
                                        <span class="truncate">Khám Phá Ngay</span>
                                    </a>
                                </div>
                            </div>
                        </div>
                        <section class="w-full px-4 sm:px-6 md:px-8 lg:px-12 xl:px-16">
                            <h2 class="text-white text-[22px] sm:text-2xl md:text-3xl font-bold leading-tight tracking-[-0.015em] pb-4 sm:pb-6 pt-5">Hàng Mới Về</h2>
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6 pb-4">
                                @if (Model != null && Model.Any())
                                {
                                    @foreach (var product in Model)
                                    {
                                        <div class="flex flex-col gap-3 rounded-xl bg-black/20 dark:bg-black/20 group">
                                            <a href="@Url.Action("Details", "Product", new { id = product.Id })" class="w-full bg-center bg-no-repeat aspect-square bg-cover rounded-t-xl overflow-hidden">
                                                <img src="@(string.IsNullOrEmpty(product.ImageUrl) ? "https://images.unsplash.com/photo-1523275335684-37898b6baf30" : product.ImageUrl)" 
                                                     alt="@product.Name" 
                                                     class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300" />
                                            </a>
                                            <div class="flex flex-col justify-between p-3 sm:p-4 pt-0 gap-3">
                                                <a href="@Url.Action("Details", "Product", new { id = product.Id })">
                                                    <p class="text-white text-base sm:text-lg font-bold leading-normal hover:text-primary transition-colors">@product.Brand.ToUpper()</p>
                                                    <p class="text-white/70 text-sm font-normal leading-normal mt-1">@product.Name</p>
                                                </a>
                                                <div class="flex gap-2 mt-2">
                                                    <button onclick="addToCart(@product.Id, event)" class="flex-1 flex items-center justify-center gap-1 px-2 py-2 rounded-lg bg-neutral-700 dark:bg-neutral-600 hover:bg-neutral-800 dark:hover:bg-neutral-700 text-white font-medium transition-colors">
                                                        <span class="material-symbols-outlined text-base">add_shopping_cart</span>
                                                        <span class="text-xs sm:text-sm">Giỏ hàng</span>
                                                    </button>
                                                    <button onclick="buyNow(@product.Id, event)" class="flex-1 flex items-center justify-center gap-1 px-2 py-2 rounded-lg bg-primary hover:bg-primary/90 text-neutral-900 font-semibold transition-colors shadow-sm">
                                                        <span class="material-symbols-outlined text-base">shopping_bag</span>
                                                        <span class="text-xs sm:text-sm">Mua ngay</span>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    }
                                }
                                else
                                {
                                    <div class="col-span-2 md:col-span-4 text-center py-12 text-white/70">
                                        <p>Chưa có sản phẩm nào</p>
                                    </div>
                                }
                            </div>
                        </section>
                        <section class="w-full">
                            <h2 class="text-white text-[22px] font-bold leading-tight tracking-[-0.015em] px-4 sm:px-6 md:px-8 lg:px-12 xl:px-16 pb-3 pt-5">Bộ Sưu Tập Nổi Bật</h2>
                            <div class="p-4 sm:p-6 md:p-8 lg:p-12 xl:p-16 grid grid-cols-1 md:grid-cols-2 gap-6">
                                <a class="group relative flex min-h-80 flex-col justify-end overflow-hidden rounded-xl p-6 text-white bg-cover bg-center" data-alt="A man in a sharp suit adjusting his cuff, revealing a classic men's watch." href="@Url.Action("Index", "Product", new { genders = "nam" })" style="background-image: linear-gradient(rgba(0,0,0,0.1), rgba(0,0,0,0.7)), url(https://m.media-amazon.com/images/S/aplus-media-library-service-media/32cc0bad-3da3-48a9-aacb-c4f8fecba307.__CR0,216,4500,2784_PT0_SX970_V1___.jpeg);">
                                    <div class="z-10 transform transition-transform duration-300 group-hover:-translate-y-2">
                                        <h3 class="text-2xl font-bold">Đồng Hồ Nam</h3>
                                        <p class="text-sm font-medium">Khám phá bộ sưu tập</p>
                                    </div>
                                </a>
                                <a class="group relative flex min-h-80 flex-col justify-end overflow-hidden rounded-xl p-6 text-white bg-cover bg-center" data-alt="A woman's wrist with an elegant gold watch, resting on a silk cloth." href="@Url.Action("Index", "Product", new { genders = "nữ" })" style="background-image: linear-gradient(rgba(0,0,0,0.1), rgba(0,0,0,0.7)), url(https://m.media-amazon.com/images/I/51uVL400pjL.jpg);">
                                    <div class="z-10 transform transition-transform duration-300 group-hover:-translate-y-2">
                                        <h3 class="text-2xl font-bold">Đồng Hồ Nữ</h3>
                                        <p class="text-sm font-medium">Khám phá bộ sưu tập</p>
                                    </div>
                                </a>
                            </div>
                        </section>
                        <section class="w-full px-4 sm:px-6 md:px-8 lg:px-12 xl:px-16 py-8 sm:py-12">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-12 items-center">
                                <div class="w-full">
                                    <img class="w-full h-auto object-cover rounded-xl" src="https://www.intercyprus.com/cdn/shop/files/poedagar-luxury-women-watch-top-brand-fashion-waterproof-stainless-steel-diamond-ladies-quartz-wristwatch-montre-femme-beautiful-67267515122006.webp?v=1761599851" alt="Luxury watch" />
                                </div>
                                <div class="w-full">
                                    <h2 class="text-white text-3xl sm:text-4xl md:text-5xl font-bold uppercase mb-8 tracking-tight">
                                        <span>ĐỒNG HỒ MANG TÍNH</span><br />
                                        <span>THỜI THƯỢNG</span>
                                    </h2>
                                    <div class="space-y-4">
                                        <div class="accordion-item border-b border-white/10 pb-4">
                                            <button class="accordion-header w-full flex items-center justify-between text-left text-white hover:text-white/80 transition-colors" onclick="toggleAccordion(this)">
                                                <span class="text-lg sm:text-xl font-semibold">Sự chính xác và độ tin cậy của đồng hồ cơ</span>
                                                <span class="accordion-icon text-red-500 text-xl ml-4 transition-transform">▼</span>
                                            </button>
                                            <div class="accordion-content mt-4 text-white/80 text-sm sm:text-base leading-relaxed overflow-hidden transition-all duration-300">
                                                <p>Thông qua các bánh răng, trục và lò xo, đồng hồ cơ tự động hoặc cơ cần lên có khả năng tự động quấn dây đồng hồ khi người dùng di chuyển, tạo ra năng lượng để hoạt động.</p>
                                            </div>
                                        </div>
                                        <div class="accordion-item border-b border-white/10 pb-4">
                                            <button class="accordion-header w-full flex items-center justify-between text-left text-white hover:text-white/80 transition-colors" onclick="toggleAccordion(this)">
                                                <span class="text-lg sm:text-xl font-semibold">Các tính năng bổ sung như lịch ngày, lịch tuần, hoặc chức năng trôi nổi độc đáo</span>
                                                <span class="accordion-icon text-white/60 text-xl ml-4 transition-transform">▶</span>
                                            </button>
                                            <div class="accordion-content mt-4 text-white/80 text-sm sm:text-base leading-relaxed max-h-0 overflow-hidden transition-all duration-300">
                                                <p>Đồng hồ cơ không chỉ đơn thuần là một phương tiện để xem giờ mà còn thể hiện sự tinh tế và cá nhân hóa của chủ nhân.</p>
</div>
                                        </div>
                                        <div class="accordion-item border-b border-white/10 pb-4">
                                            <button class="accordion-header w-full flex items-center justify-between text-left text-white hover:text-white/80 transition-colors" onclick="toggleAccordion(this)">
                                                <span class="text-lg sm:text-xl font-semibold">Dành cho những người yêu thích sự cổ điển và đầy mê hoặc</span>
                                                <span class="accordion-icon text-white/60 text-xl ml-4 transition-transform">▶</span>
                                            </button>
                                            <div class="accordion-content mt-4 text-white/80 text-sm sm:text-base leading-relaxed max-h-0 overflow-hidden transition-all duration-300">
                                                <p>Với sự kết hợp giữa sự đẹp mắt, chính xác và độc đáo, đồng hồ cơ không chỉ là một phụ kiện thời trang mà còn là một biểu tượng của phong cách và cá nhân.</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>
                        <section class="w-full">
                            <h2 class="text-white text-[22px] font-bold leading-tight tracking-[-0.015em] px-4 sm:px-6 md:px-8 lg:px-12 xl:px-16 pb-3 pt-5">Mua Sắm Theo Thương Hiệu</h2>
                            <div class="mx-4 sm:mx-6 md:mx-8 lg:mx-12 xl:mx-16 p-4 sm:p-6 bg-black/20 dark:bg-black/20 rounded-xl">
                                <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-x-8 gap-y-10 items-center justify-items-center">
                                    <a href="@Url.Action("Index", "Product", new { brands = "rolex" })" class="cursor-pointer">
                                        <img class="h-12 object-contain filter invert brightness-0 grayscale opacity-70 hover:opacity-100 transition-opacity" data-alt="Rolex logo" src="https://cdn.freebiesupply.com/logos/large/2x/rolex-logo-png-transparent.png" />
                                    </a>
                                    <a href="@Url.Action("Index", "Product", new { brands = "omega" })" class="cursor-pointer">
                                        <img class="h-12 object-contain filter invert brightness-0 grayscale opacity-70 hover:opacity-100 transition-opacity" data-alt="Omega logo" src="https://1000logos.net/wp-content/uploads/2018/10/Omega-logo.png" />
                                    </a>
                                    <a href="@Url.Action("Index", "Product", new { brands = "patek philippe" })" class="cursor-pointer">
                                        <img class="h-12 object-contain filter invert brightness-0 grayscale opacity-70 hover:opacity-100 transition-opacity" data-alt="Patek Philippe logo" src="https://1000logos.net/wp-content/uploads/2018/11/Patek-Philippe-Logo.png" />
                                    </a>
                                    <a href="@Url.Action("Index", "Product", new { brands = "audemars piguet" })" class="cursor-pointer">
                                        <img class="h-14 object-contain filter invert brightness-0 grayscale opacity-70 hover:opacity-100 transition-opacity" data-alt="Audemars Piguet logo" src="https://cdn.freebiesupply.com/logos/large/2x/audemars-piguet-logo-png-transparent.png" />
                                    </a>
                                    <a href="@Url.Action("Index", "Product", new { brands = "cartier" })" class="cursor-pointer">
                                        <img class="h-12 object-contain filter invert brightness-0 grayscale opacity-70 hover:opacity-100 transition-opacity" data-alt="Cartier logo" src="https://file.hstatic.net/200000685107/article/cartier-symbol_59d03bf3073d41608520d1f59dbd7629.png" />
                                    </a>
                                    <a href="@Url.Action("Index", "Product", new { brands = "hublot" })" class="cursor-pointer">
                                        <img class="h-12 object-contain filter invert brightness-0 grayscale opacity-70 hover:opacity-100 transition-opacity" data-alt="Hublot logo" src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/8f/Hublot_logo.svg/2560px-Hublot_logo.svg.png" />
                                    </a>
                                </div>
                            </div>
                        </section>
                        @await Html.PartialAsync("_Footer")
                    </main>
                </div>
        </div>
    </div>
</div>
@await Html.PartialAsync("_LoginModal")
@await Html.PartialAsync("_CommonScripts")
<script>
    // Drag to scroll functionality
    (function() {
        const scrollContainer = document.getElementById('productScrollContainer');
        if (!scrollContainer) return;

        let isDown = false;
        let startX;
        let scrollLeft;
        let hasMoved = false;

        scrollContainer.addEventListener('mousedown', (e) => {
            // Don't start drag if clicking on a button or link
            if (e.target.closest('button, a')) {
                return;
            }
            isDown = true;
            hasMoved = false;
            scrollContainer.style.cursor = 'grabbing';
            startX = e.pageX - scrollContainer.offsetLeft;
            scrollLeft = scrollContainer.scrollLeft;
        });

        scrollContainer.addEventListener('mouseleave', () => {
            isDown = false;
            scrollContainer.style.cursor = 'grab';
        });

        scrollContainer.addEventListener('mouseup', (e) => {
            if (isDown && hasMoved) {
                e.preventDefault();
            }
            isDown = false;
            scrollContainer.style.cursor = 'grab';
        });

        scrollContainer.addEventListener('mousemove', (e) => {
            if (!isDown) return;
            hasMoved = true;
            e.preventDefault();
            const x = e.pageX - scrollContainer.offsetLeft;
            const walk = (x - startX) * 2; // Scroll speed multiplier
            scrollContainer.scrollLeft = scrollLeft - walk;
        });
    })();

    // Accordion functionality
    function toggleAccordion(button) {
        const item = button.closest('.accordion-item');
        const content = item.querySelector('.accordion-content');
        const icon = button.querySelector('.accordion-icon');
        const isOpen = content.style.maxHeight && content.style.maxHeight !== '0px';

        // Close all accordions
        document.querySelectorAll('.accordion-content').forEach(acc => {
            acc.style.maxHeight = '0px';
        });
        document.querySelectorAll('.accordion-icon').forEach(ic => {
            ic.textContent = '▶';
            ic.classList.remove('text-red-500');
            ic.classList.add('text-white/60');
        });

        // Toggle current accordion
        if (!isOpen) {
            content.style.maxHeight = content.scrollHeight + 'px';
            icon.textContent = '▼';
            icon.classList.remove('text-white/60');
            icon.classList.add('text-red-500');
        }
    }

    // Initialize first accordion as open
    document.addEventListener('DOMContentLoaded', function() {
        const firstAccordion = document.querySelector('.accordion-item');
        if (firstAccordion) {
            const firstContent = firstAccordion.querySelector('.accordion-content');
            if (firstContent) {
                // Set initial height for first accordion
                firstContent.style.maxHeight = firstContent.scrollHeight + 'px';
            }
        }
    });

    // Buy now function
    function buyNow(productId, event) {
        event.preventDefault();
        event.stopPropagation();
        
        const button = event.target.closest('button');
        const originalText = button.innerHTML;
        
        button.disabled = true;
        button.innerHTML = '<span class="material-symbols-outlined text-base">hourglass_empty</span><span class="text-sm">Đang xử lý...</span>';
        
        // Simulate processing
        setTimeout(() => {
            // Redirect to product details or checkout
            window.location.href = `/Product/Details/${productId}`;
        }, 1000);
    }

    // Add to cart function
    function addToCart(productId, event) {
        event.preventDefault();
        event.stopPropagation();
        
        const button = event.target.closest('button');
        const originalText = button.innerHTML;
        
        button.disabled = true;
        button.innerHTML = '<span class="material-symbols-outlined text-base">check</span><span class="text-sm">Đã thêm</span>';
        button.classList.remove('bg-neutral-700', 'dark:bg-neutral-600', 'hover:bg-neutral-800', 'dark:hover:bg-neutral-700');
        button.classList.add('bg-green-500', 'hover:bg-green-600');
        
        // Reset button after 2 seconds
        setTimeout(() => {
            button.disabled = false;
            button.innerHTML = originalText;
            button.classList.remove('bg-green-500', 'hover:bg-green-600');
            button.classList.add('bg-neutral-700', 'dark:bg-neutral-600', 'hover:bg-neutral-800', 'dark:hover:bg-neutral-700');
        }, 2000);
        
        // TODO: Implement actual cart functionality
        // fetch('/Cart/Add', { method: 'POST', body: JSON.stringify({ productId: productId }), ... })
    }
</script>
</body>
</html>
